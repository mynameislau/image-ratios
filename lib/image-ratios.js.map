{"version":3,"sources":["webpack://imageRatios/webpack/universalModuleDefinition","webpack://imageRatios/webpack/bootstrap","webpack://imageRatios/./src/js/image-ratios.js","webpack://imageRatios/./src/js/utils.js"],"names":["root","factory","exports","module","define","amd","imageRatios","window","t","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","mode","__esModule","ns","create","key","bind","n","default","object","property","prototype","hasOwnProperty","p","s","e","__webpack_exports__","startDetecting","image_ratios_query","selector","query","Array","isArray","length","iterator","toString","from","TypeError","_toConsumableArray","document","querySelectorAll","target","body","defaultRatios","calculateRatios","image","ratios","imgWidth","naturalWidth","imgHeight","naturalHeight","forEach","ratio","setAttribute","concat","setImagesDetection","imagesSelector","addEventListener","options","arguments","MutationObserver","mutations","observe","childList","subtree","f"],"mappings":"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","file":"image-ratios.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"imageRatios\"] = factory();\n\telse\n\t\troot[\"imageRatios\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import { queryToArray } from './utils';\n\nconst query = selector => queryToArray(document.querySelectorAll(selector));\n\n// Select the target node\nconst target = document.body;\n\nconst defaultRatios = [\n  { name: '1-1', value: 1 },\n  { name: '16-9', value: 16 / 9 },\n  { name: '4-3', value: 4 / 3 }\n];\n\nconst calculateRatios = (image, ratios) => {\n  const imgWidth = image.naturalWidth;\n  const imgHeight = image.naturalHeight;\n\n  ratios.forEach(ratio => {\n    image.setAttribute(\n      `data-higher-than-ratio-${ratio.name}`,\n      imgWidth / imgHeight > ratio.value\n    );\n  });\n\n  image.setAttribute('data-biggest-dimension', imgHeight > imgWidth ? 'height' : 'width');\n}\n\nconst setImagesDetection = (imagesSelector, ratios) => {\n  // Console.log(mutation.type);\n  const imgQuery = query(`${imagesSelector}:not([data-biggest-dimension])`);\n\n  imgQuery.forEach(image => {\n    calculateRatios(image, ratios);\n\n    image.addEventListener('load', () => {\n      calculateRatios(image, ratios);\n    });\n  });\n};\n\nexport const startDetecting = (options = {\n  imagesSelector: 'img',\n  ratios: defaultRatios\n}) => {\n\n  options.ratios = options.ratios || defaultRatios;\n  options.imagesSelector = options.imagesSelector || 'img';\n\n  if (!window.MutationObserver) {\n    return;\n  }\n  const observer = new MutationObserver(mutations => {\n    mutations.forEach(() => setImagesDetection(options.imagesSelector, options.ratios));\n  });\n\n  observer.observe(target, { childList: true, subtree: true });\n\n  setImagesDetection(options.imagesSelector, options.ratios);\n};\n\nexport default startDetecting;\n","export const queryToArray = query => {\r\n  return [...query];\r\n};\r\n\r\nexport const isOrContains = (container, element) =>\r\n  container === element || container.contains(element);\r\n\r\nexport const updateState = (element, attribute, targetState) => {\r\n  if (element.getAttribute(attribute) !== targetState) {\r\n    element.setAttribute(attribute, targetState);\r\n  }\r\n};\r\n"],"sourceRoot":""}