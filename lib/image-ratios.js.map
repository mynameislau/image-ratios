{"version":3,"sources":["webpack://imageRatios/webpack/universalModuleDefinition","webpack://imageRatios/webpack/bootstrap","webpack://imageRatios/./src/js/image-ratios.js","webpack://imageRatios/./src/js/utils.js"],"names":["root","factory","exports","module","define","amd","imageRatios","window","e","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","default","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","startDetecting","image_ratios_query","selector","query","Array","isArray","length","iterator","toString","from","TypeError","_toConsumableArray","document","querySelectorAll","target","body","defaultRatios","calculateRatios","imagesSelector","ratios","concat","forEach","image","newImg","Image","addEventListener","imgHeight","height","imgWidth","width","ratio","setAttribute","src","getAttribute","options","arguments","MutationObserver","mutations","observe","childList","subtree"],"mappings":"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","file":"image-ratios.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"imageRatios\"] = factory();\n\telse\n\t\troot[\"imageRatios\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import { queryToArray } from './utils';\n\nconst query = selector => queryToArray(document.querySelectorAll(selector));\n\n// Select the target node\nconst target = document.body;\n\nconst defaultRatios = [\n  { name: '1-1', value: 1 },\n  { name: '16-9', value: 16 / 9 },\n  { name: '4-3', value: 4 / 3 }\n];\n\nconst calculateRatios = (imagesSelector, ratios) => {\n  // Console.log(mutation.type);\n  const imgQuery = query(`${imagesSelector}:not([data-biggest-dimension])`);\n\n  imgQuery.forEach(image => {\n    // Console.log('image !', image.getAttribute('src'));\n    const newImg = new Image();\n\n    newImg.addEventListener('load', () => {\n      const imgHeight = newImg.height;\n      const imgWidth = newImg.width;\n      // Console.log(`The image size is ${width}*${height}`);\n\n      ratios.forEach(ratio => {\n        image.setAttribute(\n          `data-higher-than-ratio-${ratio.name}`,\n          imgWidth / imgHeight > ratio.value\n        );\n      });\n\n      image.setAttribute('data-biggest-dimension', imgHeight > imgWidth ? 'height' : 'width');\n    });\n\n    newImg.src = image.getAttribute('src');\n  });\n};\n\nexport const startDetecting = (options = {\n  imagesSelector: 'img',\n  ratios: defaultRatios\n}) => {\n\n  options.ratios = options.ratios || defaultRatios;\n  options.imagesSelector = options.imagesSelector || 'img';\n\n  if (!window.MutationObserver) {\n    return;\n  }\n  const observer = new MutationObserver(mutations => {\n    mutations.forEach(() => calculateRatios(options.imagesSelector, options.ratios));\n  });\n\n  observer.observe(target, { childList: true, subtree: true });\n\n  calculateRatios(options.imagesSelector, options.ratios);\n};\n\nexport default startDetecting;\n","export const queryToArray = query => {\r\n  return [...query];\r\n};\r\n\r\nexport const isOrContains = (container, element) =>\r\n  container === element || container.contains(element);\r\n\r\nexport const updateState = (element, attribute, targetState) => {\r\n  if (element.getAttribute(attribute) !== targetState) {\r\n    element.setAttribute(attribute, targetState);\r\n  }\r\n};\r\n"],"sourceRoot":""}